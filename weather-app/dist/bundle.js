(()=>{"use strict";const t=document.querySelector("#tbody"),e=document.querySelector("#map");function n(n,o){let{location:{name:c,country:r,lat:a,lon:i},current:{temperature:l}}=n,u=Math.ceil(1.8*l+32);o.set(c,{city:c,country:r,tempC:l,tempF:u,lat:a,lon:i}),function(e){let n="";e.forEach((t=>{let{city:e,country:o,tempC:c,tempF:r}=t;n+=`\n\t\t<tr>\n            <td>${e}</td>\n            <td>${o}</td>\n            <td>${c}</td>\n            <td>${r}</td>\n        </tr>\n\t\t`})),t.innerHTML=n}(o),function(t,n){e.src=`https://maps.locationiq.com/v2/staticmap?key=pk.d89054d8b17b55dfd7691554b7652a5a&center=${t},${n}&size=400x400&zoom=14&markers=${t},${n}|icon:large-red-cutout;&format=png`}(a,i)}const o=document.querySelector("#input"),c=document.querySelector("#clear"),r=document.querySelector("#my-weather");let a=new Map;function i(t){return fetch("http://api.weatherstack.com/current?access_key=cc3f94caaf8feef30483bb3e706b17e8&query="+t).then((t=>t.json()))}function l({coords:{latitude:t,longitude:e}}){i(t).then((t=>{localStorage.setItem(t.location.name,JSON.stringify(t)),n(t,a)}))}window.addEventListener("load",(()=>{!function(){let t=Object.keys(localStorage);for(let e of t)i(e).then((t=>{localStorage.setItem(e,JSON.stringify(t)),n(t,a)}))}()})),r.addEventListener("click",(()=>{navigator.geolocation.getCurrentPosition(l)})),form.addEventListener("submit",(function(t){t.preventDefault(),i(o.value).then((t=>n(t,a))),o.value=""})),c.addEventListener("click",(()=>{table.innerHTML="",map.src=""}))})();